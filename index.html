<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
      :root {
    --primary-color: #007bff;
    --secondary-color: #4CAF50;
    --warning-color: #f0ad4e;
    --danger-color: #dc3545;
    --background-color: #f0f0f0;
    --container-color: #fff;
    --text-color: #333;
    --border-radius: 15px;
}

body {
    font-family: 'Arial', sans-serif;
    background-color: var(--background-color);
    text-align: center;
    margin: 0;
    padding: 0;
    color: var(--text-color);
}

#container {
    width: 90%;
    max-width: 800px;
    margin: 20px auto;
    background-color: var(--container-color);
    padding: 20px;
    border-radius: var(--border-radius);
}

h1 {
    color: var(--primary-color);
    margin-bottom: 20px;
    font-size: 2.5em;
}

#setup {
    margin-bottom: 20px;
    border: 2px solid var(--primary-color);
    padding: 15px;
    border-radius: var(--border-radius);
    background-color: #f7f9fc;
}

#setup label {
    font-size: 18px;
    font-weight: bold;
}

#setup input[type="number"], #setup select {
    padding: 10px;
    font-size: 16px;
    border: 2px solid #ccc;
    border-radius: 5px;
    margin-right: 10px;
    width: 80px;
}

#setup input[type="number"]:focus, #setup select:focus {
    border-color: var(--primary-color);
}

#startButton {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    background-color: var(--secondary-color);
    color: white;
    font-weight: bold;
}

#quiz {
    display: none;
}

.question {
    margin: 20px 0;
    font-size: 24px;
    font-weight: bold;
    border-bottom: 2px solid var(--primary-color);
    padding-bottom: 10px;
}

.options {
    list-style-type: none;
    padding: 0;
    text-align: left;
}

.options li {
    margin: 10px 0;
    background-color: #e7f3fe;
    border: 1px solid #b3d7ff;
    border-radius: 5px;
    padding: 10px;
}

.options li:hover {
    background-color: #d0e7ff;
}

.options input[type="radio"] {
    margin-right: 10px;
}

#questionNumbers {
    display: flex;
    overflow-x: auto;
    margin-bottom: 20px;
    justify-content: center;
}

#questionNumbers button {
    flex: 1;
    margin: 2px;
    padding: 10px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    color: white;
}

#questionNumbers .selected {
    background-color: var(--secondary-color);
}

#questionNumbers .solving {
    background-color: var(--primary-color);
}

#questionNumbers .upcoming {
    background-color: #ddd;
    color: black;
}

#prevButton, #nextButton, #submitButton {
    padding: 10px 20px;
    font-size: 16px;
    margin: 10px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    font-weight: bold;
}

#prevButton {
    background-color: var(--warning-color);
    color: white;
}

#nextButton {
    background-color: var(--warning-color);
    color: white;
}

#submitButton {
    background-color: var(--primary-color);
    color: white;
}

#result {
    display: none;
    text-align: left;
    margin-top: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
    padding: 15px;
    background-color: #fff;
}

.result-item {
    margin-bottom: 20px;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9;
}

.correct {
    color: green;
    font-weight: bold;
}

.wrong {
    color: red;
    font-weight: bold;
}

#history {
    margin-top: 20px;
    text-align: left;
}

#history h2 {
    color: var(--text-color);
}

#history .button {
    margin-left: 10px;
    padding: 8px 12px;
    font-size: 14px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    background-color: var(--primary-color);
    color: white;
}

      
        body { font-family: Arial, sans-serif; }
        #container { width: 80%; margin: auto; }
        #quiz { display: none; }
        .progress-bar { width: 100%; background: #f3f3f3; border-radius: 5px; margin: 20px 0; }
        .progress { height: 20px; background: #4caf50; width: 0; border-radius: 5px; }
        .correct { color: green; }
        .wrong { color: red; }
        #timer { font-size: 20px; }
    </style>
</head>
<body>
    <div id="container">
        <h1><i class="fas fa-question-circle"></i> Quiz Game</h1>
        <div id="setup">
            <label for="numQuestions"><i class="fas fa-list-alt"></i> Number of Questions: </label>
            <input type="number" id="numQuestions" min="1" max="15" placeholder="5">
            <label for="subject"><i class="fas fa-book"></i> Select Subject:</label>
            <select id="subject">
                <option value="biology">Biology</option>
                <option value="chemistry">Chemistry</option>
                <option value="physics">Physics</option>
                <option value="math">Mathematics</option>
            </select>
            <button id="startButton" aria-label="Start the quiz"><i class="fas fa-play"></i> Start</button>
        </div>
        <div id="quiz">
            <div id="timer"></div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div id="questionNumbers"></div>
            <div id="questionContainer">
                <div id="question" class="question"></div>
                <ul id="options" class="options"></ul>
            </div>
            <button id="prevButton" aria-label="Go to previous question"><i class="fas fa-arrow-left"></i> Previous</button>
            <button id="nextButton" aria-label="Go to next question"><i class="fas fa-arrow-right"></i> Next</button>
            <button id="submitButton" aria-label="Submit answers"><i class="fas fa-check"></i> Submit</button>
        </div>
        <div id="result"></div>
        <div id="history"></div>
    </div>

    <script>
        const biologyQuestions = [
            { question: "The oversized amoeba cells that are part of our innate immune system found in areolar tissue are called:", options: ["Macrophages", "Mast cells", "Fibroblasts", "Adipocytes"], correct: 0 },
            { question: "Cells that release heparin and histamine into the blood are:", options: ["Basophils", "Mast cells", "Eosinophils", "Neutrophils"], correct: 0 },
            { question: "This feature is not found in Periplaneta Americana:", options: ["During embryonic development, indeterminate and radial cleavage occur", "Schizocoelom as the body cavity", "Metamerically segmented body", "Exoskeleton composed of N-acetyl glucose-amine"], correct: 0 },
            { question: "The function of the gap junction is to:", options: ["Facilitates communication between neighboring cells by quickly connecting the cytoplasm. Movement of ions, small molecules, and some large molecules", "Prevent substances from leaking through tissues", "Separate two cells from each other", "Perform cementation to join adjacent cells."], correct: 0 },
            { question: "This accurately describes an animal:", options: ["Earthworm – the alimentary canal consists of a sequence of the pharynx, esophagus, stomach, gizzard, and intestine", "Rat – left kidney is slightly higher in position than the correct one", "Cockroach – 10 pairs of spiracles (8 pairs on the abdomen and 2 pairs on the thorax)", "Frog — body divisible into three regions — head, neck, and trunk"], correct: 0 },
            { question: "In which of the following preparations are you likely to come across cell junctions most frequently?", options: ["Hyaline cartilage", "Thrombocytes", "Ciliated epithelium", "Tendon"], correct: 2 },
            { question: "The non-excitable, variously shaped, and found between neurons are:", options: ["Dendrites", "Nissibodies", "Glial cells", "Schwann cell"], correct: 2 },
            { question: "How are skeletal muscles similar to visceral muscles?", options: ["Shape of muscle fibers.", "Muscle fibers have a certain number of nuclei.", "Presence of actin and myosin filaments.", "Presence of light and dark bands."], correct: 2 },
            { question: "Which ion is necessary for the contraction of a muscle and nerve impulse transmission?", options: ["N+", "K+", "Ca++", "None of the above"], correct: 2 },
            { question: "Bipolar neurons are found in human ______:", options: ["Brain", "Spinal cord", "Embryonic stages", "Olfactory epithelium"], correct: 3 },
            { question: "The epiglottis, pinna, and tip of the nose contain the following types of cartilage:", options: ["Elastic", "Hyaline", "Fibrous", "Calcified"], correct: 0 },
            { question: "What type of animal tissue changes a blood vessel’s diameter?", options: ["Epithelium", "Connective", "Muscle", "Neural"], correct: 2 },
            { question: "The body cells in cockroaches discharge their nitrogenous waste in the hemolymph mainly as:", options: ["Ammonia", "Potassium urate", "Urea", "Calcium carbonate"], correct: 1 },
            { question: "The kind of epithelium which forms the inner walls of blood vessels is:", options: ["Cuboidal epithelium", "Columnar epithelium", "Ciliated columnar epithelium", "Squamous epithelium"], correct: 3 },
            { question: "The epithelial tissue on the inner surface of bronchioles and fallopian tubes is:", options: ["Cuboidal", "Glandular", "Ciliated", "Squamous"], correct: 2 },
            { question: "In which part of the reproductive system is male cockroach sperm stored?", options: ["Vas Deferens", "Testes", "Mushroom glands", "Seminal vesicles"], correct: 3 }
        ];

        const subjects = {
            biology: biologyQuestions,
        };

        let selectedQuestions = [];
        let userAnswers = [];
        let currentQuestion = 0;
        let numQuestions = 0;
        let quizHistory = JSON.parse(localStorage.getItem('quizHistory')) || [];
        let timerInterval;
        let timeLeft = 0; // Total time in seconds

        document.getElementById('startButton').addEventListener('click', startQuiz);
        document.getElementById('prevButton').addEventListener('click', () => changeQuestion(-1));
        document.getElementById('nextButton').addEventListener('click', () => changeQuestion(1));
        document.getElementById('submitButton').addEventListener('click', submitQuiz);

        function startQuiz() {
            numQuestions = parseInt(document.getElementById('numQuestions').value);
            if (isNaN(numQuestions) || numQuestions < 1 || numQuestions > 15) {
                alert("Please enter a valid number of questions (1-15).");
                return;
            }
            const subject = document.getElementById('subject').value;
            selectedQuestions = getRandomQuestions(numQuestions, subject);
            userAnswers = Array(numQuestions).fill(null);
            currentQuestion = 0;
            timeLeft = numQuestions * 60; // Set total time based on number of questions
            document.getElementById('setup').style.display = 'none';
            document.getElementById('quiz').style.display = 'block';
            displayQuestion();
            updateQuestionNumbers();
            startTimer();
        }

        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').innerText = `Time Left: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            const progress = (1 - timeLeft / (numQuestions * 60)) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
        }

        function getRandomQuestions(num, subject) {
            const questions = subjects[subject];
            if (questions.length < num) {
                alert(`Not enough questions available in ${subject}. Showing ${questions.length} questions instead.`);
                num = questions.length;
            }
            const shuffled = questions.sort(() => 0.5 - Math.random());
            return shuffled.slice(0, num);
        }

        function displayQuestion() {
            const question = selectedQuestions[currentQuestion];
            document.getElementById('question').innerText = question.question;
            const options = document.getElementById('options');
            options.innerHTML = '';
            question.options.forEach((option, index) => {
                const li = document.createElement('li');
                const input = document.createElement('input');
                input.type = 'radio';
                input.name = 'option';
                input.value = index;
                if (userAnswers[currentQuestion] === index) {
                    input.checked = true;
                }
                input.addEventListener('change', () => userAnswers[currentQuestion] = index);
                li.appendChild(input);
                li.appendChild(document.createTextNode(option));
                options.appendChild(li);
            });
        }

        function changeQuestion(direction) {
            currentQuestion += direction;
            if (currentQuestion >= numQuestions) {
                alert("Questions ended. Please submit your answers.");
                currentQuestion = numQuestions - 1;
            } else if (currentQuestion < 0) {
                currentQuestion = 0;
            }
            displayQuestion();
            updateQuestionNumbers();
        }

        function updateQuestionNumbers() {
            const questionNumbers = document.getElementById('questionNumbers');
            questionNumbers.innerHTML = '';
            for (let i = 0; i < numQuestions; i++) {
                const button = document.createElement('button');
                button.innerText = i + 1;
                if (userAnswers[i] !== null) {
                    button.classList.add('selected');
                } else if (i === currentQuestion) {
                    button.classList.add('solving');
                } else {
                    button.classList.add('upcoming');
                }
                button.addEventListener('click', () => {
                    currentQuestion = i;
                    displayQuestion();
                    updateQuestionNumbers();
                });
                questionNumbers.appendChild(button);
            }
        }

        function submitQuiz() {
            clearInterval(timerInterval); // Stop the timer
            let score = 0;
            const resultContainer = document.getElementById('result');
            resultContainer.innerHTML = '<h2>Results</h2>';
            for (let i = 0; i < numQuestions; i++) {
                const question = selectedQuestions[i];
                const userAnswer = userAnswers[i];
                const isCorrect = userAnswer === question.correct;
                if (isCorrect) {
                    score += 4;
                } else if (userAnswer !== null) {
                    score -= 1;
                }
                const result = document.createElement('div');
                result.className = 'result-item';
                result.innerHTML = `
                    <p><strong>Question ${i + 1}:</strong> ${question.question}</p>
                    <p class="${isCorrect ? 'correct' : 'wrong'}">
                        Your answer: ${userAnswer !== null ? question.options[userAnswer] : 'No answer'}
                        ${!isCorrect ? `<br>Correct answer: ${question.options[question.correct]}` : ''}
                    </p>
                `;
                resultContainer.appendChild(result);
            }
            resultContainer.innerHTML += `<p><strong>Total Score: ${score}</strong></p>`;
            document.getElementById('quiz').style.display = 'none';
            resultContainer.style.display = 'block';

            // Save the result to history
            const quizResult = {
                date: new Date().toLocaleString(),
                questions: selectedQuestions,
                answers: userAnswers,
                score: score
            };
            quizHistory.push(quizResult);
            localStorage.setItem('quizHistory', JSON.stringify(quizHistory));
            displayHistory();
        }

        function displayHistory() {
            const historyContainer = document.getElementById('history');
            historyContainer.innerHTML = '<h2>History</h2>';
            quizHistory.forEach((quiz, index) => {
                const historyItem = document.createElement('div');
                historyItem.innerHTML = `
                    <p><strong>Quiz ${index + 1}</strong> - ${quiz.date} - Score: ${quiz.score}</p>
                    <button class="button" onclick="viewHistory(${index})"><i class="fas fa-eye"></i> View</button>
                `;
                historyContainer.appendChild(historyItem);
            });
        }

        function viewHistory(index) {
            const quiz = quizHistory[index];
            const resultContainer = document.getElementById('result');
            resultContainer.innerHTML = `<h2>Quiz on ${quiz.date}</h2>`;
            quiz.questions.forEach((question, i) => {
                const userAnswer = quiz.answers[i];
                const isCorrect = userAnswer === question.correct;
                const result = document.createElement('div');
                result.className = 'result-item';
                result.innerHTML = `
                    <p><strong>Question ${i + 1}:</strong> ${question.question}</p>
                    <p class="${isCorrect ? 'correct' : 'wrong'}">
                        Your answer: ${userAnswer !== null ? question.options[userAnswer] : 'No answer'}
                        ${!isCorrect ? `<br>Correct answer: ${question.options[question.correct]}` : ''}
                    </p>
                `;
                resultContainer.appendChild(result);
            });
            resultContainer.innerHTML += `<p><strong>Total Score: ${quiz.score}</strong></p>`;
            document.getElementById('quiz').style.display = 'none';
            resultContainer.style.display = 'block';
        }

        // Initialize history display
        displayHistory();
    </script>
</body>
</html> 
