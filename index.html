<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #4CAF50;
            --warning-color: #f0ad4e;
            --danger-color: #dc3545;
            --background-color: #f0f0f0;
            --container-color: #fff;
            --text-color: #333;
            --hover-color: #0056b3;
            --border-radius: 15px;
            --box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--background-color);
            text-align: center;
            margin: 0;
            padding: 0;
            color: var(--text-color);
        }

        #container {
            width: 90%;
            max-width: 800px;
            margin: 20px auto;
            background-color: var(--container-color);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            transition: transform 0.2s;
        }

        #container:hover {
            transform: scale(1.02);
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        #setup {
            margin-bottom: 20px;
            border: 2px solid var(--primary-color);
            padding: 15px;
            border-radius: var(--border-radius);
            background-color: #f7f9fc;
        }

        #setup label {
            font-size: 18px;
            font-weight: bold;
        }

        #setup input[type="number"], #setup select {
            padding: 10px;
            font-size: 16px;
            border: 2px solid #ccc;
            border-radius: 5px;
            margin-right: 10px;
            width: 80px;
            transition: border 0.3s;
        }

        #setup input[type="number"]:focus, #setup select:focus {
            border-color: var(--primary-color);
        }

        #startButton {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: var(--secondary-color);
            color: white;
            transition: background-color 0.3s, transform 0.2s;
            font-weight: bold;
        }

        #startButton:hover {
            background-color: #45a049;
            transform: scale(1.05);
        }

        #quiz {
            display: none;
        }

        .question {
            margin: 20px 0;
            font-size: 24px;
            font-weight: bold;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }

        .options {
            list-style-type: none;
            padding: 0;
            text-align: left;
        }

        .options li {
            margin: 10px 0;
            background-color: #e7f3fe;
            border: 1px solid #b3d7ff;
            border-radius: 5px;
            padding: 10px;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .options li:hover {
            background-color: #d0e7ff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .options input[type="radio"] {
            margin-right: 10px;
        }

        #questionNumbers {
            display: flex;
            overflow-x: auto;
            margin-bottom: 20px;
            justify-content: center;
        }

        #questionNumbers button {
            flex: 1;
            margin: 2px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            font-weight: bold;
            color: white;
        }

        #questionNumbers .selected {
            background-color: var(--secondary-color);
        }

        #questionNumbers .solving {
            background-color: var(--primary-color);
        }

        #questionNumbers .upcoming {
            background-color: #ddd;
            color: black;
        }

        #prevButton, #nextButton, #submitButton {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s, transform 0.2s;
            font-weight: bold;
        }

        #prevButton {
            background-color: var(--warning-color);
            color: white;
        }

        #prevButton:hover {
            background-color: #ec971f;
            transform: scale(1.05);
        }

        #nextButton {
            background-color: var(--warning-color);
            color: white;
        }

        #nextButton:hover {
            background-color: #ec971f;
            transform: scale(1.05);
        }

        #submitButton {
            background-color: var(--primary-color);
            color: white;
        }

        #submitButton:hover {
            background-color: var(--hover-color);
            transform: scale(1.05);
        }

        #result {
            display: none;
            text-align: left;
            margin-top: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 15px;
            background-color: #fff;
            box-shadow: var(--box-shadow);
        }

        .result-item {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .correct {
            color: green;
            font-weight: bold;
        }

        .wrong {
            color: red;
            font-weight: bold;
        }

        #history {
            margin-top: 20px;
            text-align: left;
        }

        #history h2 {
            color: var(--text-color);
        }

        #history .button {
            margin-left: 10px;
            padding: 8px 12px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: var(--primary-color);
            color: white;
            transition: background-color 0.3s, transform 0.2s;
        }

        #history .button:hover {
            background-color: var(--hover-color);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div id="container">
        <h1><i class="fas fa-question-circle"></i> Quiz Game</h1>
        <div id="setup">
            <label for="numQuestions"><i class="fas fa-list-alt"></i> Number of Questions: </label>
            <input type="number" id="numQuestions" min="1" max="15" placeholder="5">
            <label for="subject"><i class="fas fa-book"></i> Select Subject:</label>
            <select id="subject">
                <option value="biology">Biology</option>
                <option value="chemistry">Chemistry</option>
                <option value="physics">Physics</option>
                <option value="math">Mathematics</option>
            </select>
            <button id="startButton" aria-label="Start the quiz"><i class="fas fa-play"></i> Start</button>
        </div>
        <div id="quiz">
            <div id="questionNumbers"></div>
            <div id="questionContainer">
                <div id="question" class="question"></div>
                <ul id="options" class="options"></ul>
            </div>
            <button id="prevButton" aria-label="Go to previous question"><i class="fas fa-arrow-left"></i> Previous</button>
            <button id="nextButton" aria-label="Go to next question"><i class="fas fa-arrow-right"></i> Next</button>
            <button id="submitButton" aria-label="Submit answers"><i class="fas fa-check"></i> Submit</button>
        </div>
        <div id="result"></div>
        <div id="history"></div>
    </div>

    <script>
        const biologyQuestions = [
            {
                question: "What is the powerhouse of the cell?",
                options: ["Nucleus", "Mitochondrion", "Ribosome", "Endoplasmic reticulum"],
                correct: 1
            },
            {
                question: "Which gas do plants absorb during photosynthesis?",
                options: ["Oxygen", "Carbon dioxide", "Nitrogen", "Hydrogen"],
                correct: 1
            },
            // Additional questions...
        ];

        const chemistryQuestions = [
            {
                question: "What is the chemical formula of water?",
                options: ["H2O", "CO2", "NaCl", "CH4"],
                correct: 0
            },
            {
                question: "Which element is known as the 'universal solvent'?",
                options: ["Hydrogen", "Oxygen", "Carbon", "Water"],
                correct: 1
            },
            // Additional questions...
        ];

        const physicsQuestions = [
            {
                question: "What is the SI unit of force?",
                options: ["Watt", "Newton", "Joule", "Pascal"],
                correct: 1
            },
            {
                question: "Which scientist formulated the laws of motion?",
                options: ["Isaac Newton", "Albert Einstein", "Galileo Galilei", "Nikola Tesla"],
                correct: 0
            },
            // Additional questions...
        ];

        const mathQuestions = [
            {
                question: "What is the value of Ï€ (pi)?",
                options: ["3.14", "2.71", "1.62", "4.67"],
                correct: 0
            },
            {
                question: "What is the square root of 64?",
                options: ["6", "7", "8", "9"],
                correct: 2
            },
            // Additional questions...
        ];

        const subjects = {
            biology: biologyQuestions,
            chemistry: chemistryQuestions,
            physics: physicsQuestions,
            math: mathQuestions
        };

        let selectedQuestions = [];
        let userAnswers = [];
        let currentQuestion = 0;
        let numQuestions = 0;
        let quizHistory = JSON.parse(localStorage.getItem('quizHistory')) || [];

        document.getElementById('startButton').addEventListener('click', startQuiz);
        document.getElementById('prevButton').addEventListener('click', () => changeQuestion(-1));
        document.getElementById('nextButton').addEventListener('click', () => changeQuestion(1));
        document.getElementById('submitButton').addEventListener('click', submitQuiz);

        function startQuiz() {
            numQuestions = parseInt(document.getElementById('numQuestions').value);
            if (isNaN(numQuestions) || numQuestions < 1 || numQuestions > 15) {
                alert("Please enter a valid number of questions (1-15).");
                return;
            }
            const subject = document.getElementById('subject').value;
            selectedQuestions = getRandomQuestions(numQuestions, subject);
            userAnswers = Array(numQuestions).fill(null);
            currentQuestion = 0;
            document.getElementById('setup').style.display = 'none';
            document.getElementById('quiz').style.display = 'block';
            displayQuestion();
            updateQuestionNumbers();
        }

        function getRandomQuestions(num, subject) {
            const questions = subjects[subject];
            if (questions.length < num) {
                alert(`Not enough questions available in ${subject}. Showing ${questions.length} questions instead.`);
                num = questions.length;
            }
            const shuffled = questions.sort(() => 0.5 - Math.random());
            return shuffled.slice(0, num);
        }

        function displayQuestion() {
            const question = selectedQuestions[currentQuestion];
            document.getElementById('question').innerText = question.question;
            const options = document.getElementById('options');
            options.innerHTML = '';
            question.options.forEach((option, index) => {
                const li = document.createElement('li');
                const input = document.createElement('input');
                input.type = 'radio';
                input.name = 'option';
                input.value = index;
                if (userAnswers[currentQuestion] === index) {
                    input.checked = true;
                }
                input.addEventListener('change', () => userAnswers[currentQuestion] = index);
                li.appendChild(input);
                li.appendChild(document.createTextNode(option));
                options.appendChild(li);
            });
        }

        function changeQuestion(direction) {
            currentQuestion += direction;
            if (currentQuestion >= numQuestions) {
                alert("Questions ended. Please submit your answers.");
                currentQuestion = numQuestions - 1;
            } else if (currentQuestion < 0) {
                currentQuestion = 0;
            }
            displayQuestion();
            updateQuestionNumbers();
        }

        function updateQuestionNumbers() {
            const questionNumbers = document.getElementById('questionNumbers');
            questionNumbers.innerHTML = '';
            for (let i = 0; i < numQuestions; i++) {
                const button = document.createElement('button');
                button.innerText = i + 1;
                if (userAnswers[i] !== null) {
                    button.classList.add('selected');
                } else if (i === currentQuestion) {
                    button.classList.add('solving');
                } else {
                    button.classList.add('upcoming');
                }
                button.addEventListener('click', () => {
                    currentQuestion = i;
                    displayQuestion();
                    updateQuestionNumbers();
                });
                questionNumbers.appendChild(button);
            }
        }

        function submitQuiz() {
            let score = 0;
            const resultContainer = document.getElementById('result');
            resultContainer.innerHTML = '<h2>Results</h2>';
            for (let i = 0; i < numQuestions; i++) {
                const question = selectedQuestions[i];
                const userAnswer = userAnswers[i];
                const isCorrect = userAnswer === question.correct;
                if (isCorrect) {
                    score += 4;
                } else if (userAnswer !== null) {
                    score -= 1;
                }
                const result = document.createElement('div');
                result.className = 'result-item';
                result.innerHTML = `
                    <p><strong>Question ${i + 1}:</strong> ${question.question}</p>
                    <p class="${isCorrect ? 'correct' : 'wrong'}">
                        Your answer: ${userAnswer !== null ? question.options[userAnswer] : 'No answer'}
                        ${!isCorrect ? `<br>Correct answer: ${question.options[question.correct]}` : ''}
                    </p>
                `;
                resultContainer.appendChild(result);
            }
            resultContainer.innerHTML += `<p><strong>Total Score: ${score}</strong></p>`;
            document.getElementById('quiz').style.display = 'none';
            resultContainer.style.display = 'block';

            // Save the result to history
            const quizResult = {
                date: new Date().toLocaleString(),
                questions: selectedQuestions,
                answers: userAnswers,
                score: score
            };
            quizHistory.push(quizResult);
            localStorage.setItem('quizHistory', JSON.stringify(quizHistory));
            displayHistory();
        }

        function displayHistory() {
            const historyContainer = document.getElementById('history');
            historyContainer.innerHTML = '<h2>History</h2>';
            quizHistory.forEach((quiz, index) => {
                const historyItem = document.createElement('div');
                historyItem.innerHTML = `
                    <p><strong>Quiz ${index + 1}</strong> - ${quiz.date} - Score: ${quiz.score}</p>
                    <button class="button" onclick="viewHistory(${index})"><i class="fas fa-eye"></i> View</button>
                `;
                historyContainer.appendChild(historyItem);
            });
        }

        function viewHistory(index) {
            const quiz = quizHistory[index];
            const resultContainer = document.getElementById('result');
            resultContainer.innerHTML = `<h2>Quiz on ${quiz.date}</h2>`;
            quiz.questions.forEach((question, i) => {
                const userAnswer = quiz.answers[i];
                const isCorrect = userAnswer === question.correct;
                const result = document.createElement('div');
                result.className = 'result-item';
                result.innerHTML = `
                    <p><strong>Question ${i + 1}:</strong> ${question.question}</p>
                    <p class="${isCorrect ? 'correct' : 'wrong'}">
                        Your answer: ${userAnswer !== null ? question.options[userAnswer] : 'No answer'}
                        ${!isCorrect ? `<br>Correct answer: ${question.options[question.correct]}` : ''}
                    </p>
                `;
                resultContainer.appendChild(result);
            });
            resultContainer.innerHTML += `<p><strong>Total Score: ${quiz.score}</strong></p>`;
            document.getElementById('quiz').style.display = 'none';
            resultContainer.style.display = 'block';
        }

        // Initialize history display
        displayHistory();
    </script>
</body>
</html> 
